---

- name: "MOTD dependencies 1/2"
  package: name="{{ item }}" state=present
  with_items:
   - python2-psutil

- name: "MOTD dependencies 2/2"
  pip: name="{{ item }}"
  with_items:
   # The specific version is because colored is broken:
   # https://stackoverflow.com/questions/51072434/pip-install-colored-getting-error-filenotfounderror-errno-2-no-such-file-or
   - 'colored==1.3.5'

- name: "MOTD Directory"
  file: path=/etc/motd.d state=directory mode='0755'

- name: "Message of the Day Scripts"
  copy:
    src:  etc/motd.d
    dest: /etc
    mode: '0755'
    force: yes
    directory_mode: '0755'

- name: "Message of the Day File"
  template:
    src:  "etc/motd.d/motd.j2"
    dest: "/etc/motd.d/motd"
    mode: '0644'
    force: yes
